<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
<<<<<<< HEAD
	<title>Stackexchange bounty contract - Powered by Ethereum + Oraclize</title>
=======
	<title>Stackexchange Bounty Contract - Powered by Ethereum + Oraclize</title>
>>>>>>> working_branch
  <link rel="icon" type="image/png" href="favicon.png">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script type="text/javascript" src="web3.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/paper/bootstrap.min.css">
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">
  <script type="text/javascript" src="https://pagedown.googlecode.com/hg/Markdown.Converter.js"></script>
  <script type="text/javascript" src="https://pagedown.googlecode.com/hg/Markdown.Sanitizer.js"></script>
  <script type="text/javascript" src="https://pagedown.googlecode.com/hg/Markdown.Editor.js"></script>
  <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script>
  <script type="text/javascript" src="MJPDEditing.js"></script>
<<<<<<< HEAD
  <script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
  <script src="http://inacho.github.io/bootstrap-markdown-editor/dist/js/bootstrap-markdown-editor.js"></script>
=======
>>>>>>> working_branch

  <noscript>
    <style type="text/css">
      .active_javascript {
        display: initial !important;
        font-size: 1.4em;
        left: 0;
        right: 0;
        position: fixed;
        z-index: 100000000;
        background-color: #FFF000;
        border-bottom: 1px solid #B9B129;
      }
    </style>
  </noscript>

  <style type="text/css">
  .right {
    text-align:right;
  }
  .left {
    text-align: left;
  }
  .center {
    text-align: center;
  }
  .fright {
    float: right;
  }
  .fleft {
    float: left;
  }
  .show {
    display: initial !important;
  }
  .alert-info {
    background-color: #949EFF !important;
    border: 1px solid #6674FF;
  }
  .alert-success {
    border: 1px solid #398A3D;
  }
  .b {
    text-decoration: underline;
  }

  #bback > a:hover {
    border-bottom:1px solid #0a6ebd !important;
  }
  .extra {
    font-size: 1.15em;
    font-weight: 500;
  }
  .bg {
    font-size: 1.2em;
  }
  .seemore {
<<<<<<< HEAD
    text-transform: uppercase; -ms-transform: rotate(90deg); -webkit-transform: rotate(90deg); transform: rotate(90deg); position: absolute; bottom: 0; top: 0; right: 0; text-align: -webkit-left; margin-top: 28px; 
  }
  .rounded {
    background-color: #6F86FF;
    -webkit-border-radius: 17px; 
    -moz-border-radius: 17px; 
=======
    text-transform: uppercase;
    -ms-transform: rotate(90deg);
    -webkit-transform: rotate(90deg);
    transform: rotate(90deg);
    position: absolute;
    bottom: 0;
    top: 0;
    right: 0;
    text-align:
    -webkit-left;
    margin-top: 28px;
  }
  .rounded {
    background-color: #6F86FF;
    -webkit-border-radius: 17px;
    -moz-border-radius: 17px;
>>>>>>> working_branch
    border-radius: 17px;
    padding: 4px 8px 4px 12px;
    color: #FFF;
  }
  .playedit {
<<<<<<< HEAD
    font-size: 2em; vertical-align: middle; float: right; top: 0; bottom: 0; position: absolute; right: 5px; margin-top: 14px;
=======
    font-size: 2em;
    vertical-align:
    middle;
    float:
    right;
    top: 0;
    bottom: 0;
    position: absolute;
    right: 5px;
    margin-top: 14px;
>>>>>>> working_branch
  }
  .iconsite {
    text-align: center;
    position: absolute;
  }
  .siteb {
    color: #909090;
  }
  .box_all_ans {
    background-color: #E2E2E2;
    font-size: 1.25em;
    vertical-align: middle;
    height: 45px;
  }
  </style>
<<<<<<< HEAD
        <script>
=======
   <script>
>>>>>>> working_branch
            MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
                tex2jax: { inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ], displayMath: [ ["$$","$$"], ["\\[", "\\]"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno" },
                TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
                messageStyle: "none"
            });
<<<<<<< HEAD
        </script>  
</head>
<body>



<div style="position: absolute; left: 0; top: 0; padding: 5px 0 0 5px; font-size: 1.05em;" id="bback">
  <a href="http://dapps.oraclize.it/" style="border-bottom: 1px dotted #2196F3; text-decoration: none;"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> √êapps list</a>
</div>
<!--
<div style="position: fixed; top: 0; right: 0; z-index: 10000; padding: 10px; background-color: rgba(0, 0, 0, 0.55); color: #FFF; border: 1px solid #737373; margin: 5px 5px 0 0;display:none;" id="toastm">
        <button type="button" class="close" aria-label="Close" style="position:absolute;right: 5px; top: 5px;" onclick="$('#toastm').addClass('animated fadeOut');"><span aria-hidden="true">&times;</span></button>
<div class="center">
<span style="font-size:1.2em;">HOW IT WORKS</span>
</div>

Use this smart contract to sponsor youtubers,<br> pay only for the successful ones.<br>
<div class="center">
<a href="http://dapps.oraclize.it/youtube-escrow/#0x21c653f72ee09bb2c1246b31520dec7f0b58b7da" class="btn btn-primary btn-sm" style="margin-top:5px;" onclick="window.setTimeout(function(){ location.reload(); },80);">Click here to see an example</a>
</div>
</div>
-->
   <span class="active_javascript center" style="display:none;">Javascript is required, please enable it</span>
   <div class="container">

<!-- Modal -->
<div class="modal fade" id="sponsorq1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Sponsor this question</h4>
      </div>
      <div class="modal-body center">
        Becoming a sponsor for this question is that easy you just need to deposit any amount to this Ethereum address and then reload the page:
        <div class="center" style="margin-top:10px;margin-bottom:7px;">
          <input type="text" value="" id="contriddep" class="form-control" style="width: 400px; display: inline-block; right: 0; left: 0; text-align: center;border-radius: 5px;-moz-border-radius:5px;border: 1px dashed #B5B5B5;background-color: #F5F5F5;" readonly onclick="this.select();"/>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

      <div class="page-header">
        <h3>StackExchange bounty contract</h3>
          <div class="fright right">
      <button type="button" class="btn" data-toggle="collapse" data-target="#collapsedit" id="buttoncollapseid">Advanced mode</button>
      <div style="margin-top:7px;"></div>
      <span id="arrowifdisabled"></span>
      <button type="button" class="btn btn-info" style="display:none;" data-target="#addnqc" id="addnq" title="Please connect to your local unlocked node before" data-toggle="modal" disabled>Add a new question</button>
      <button type="button" class="btn btn-success" style="display:none;" data-target="#sponsorq1" id="sponsorq" data-toggle="modal" disabled>Sponsor this question</button>
        </div>
        <p class="lead">Stackexchange question based escrow<br> </p><span class="text-muted">Powered by <a href="https://www.ethereum.org/" target="_blank">Ethereum</a> + <a href="http://www.oraclize.it" target="_blank">Oraclize</a></span>
      </div>
  <div id="collapsedit" class="collapse">
      <div class="row">
        <div class="col-md-6">
        <div class="form-inline">
          <div class="form-group">
              <label for="contractid" class="control-label">Please enter the contract ID:</label>
              <input type="text" class="form-control" id="contractid" style="width:400px;margin: 0 5px 0 5px;">
              <span class="btn btn-default" id="submitcontractid">SUBMIT</span>
          </div>
        </div>
        </div>

        <div class="col-md-6">
        <div class="well" style="overflow: auto;">
        <div class="center" style="margin-bottom:7px;margin-top:-10px;">
        <div class="btn-group" role="group" aria-label="..." id="btgr" style="display:none;">
        </div>
        </div>
         <div class="form-inline">
          <div class="form-group">
              <label for="gethip" class="control-label">Connect to geth:</label>
              <input type="text" class="form-control" id="gethip" style="width:200px;margin: 0 5px 0 5px;" value="http://178.62.29.206:8083">
              <!--<input type="text" class="form-control" id="gethip" style="width:200px;margin: 0 5px 0 5px;" value="http://localhost:8545">-->
              <span class="btn btn-default" id="submitgethip">CONNECT</span>
          </div>
        </div>      
        <div class="fleft" id="connected" style="display:none;">
          <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Connected
        </div>
        <div class="fleft" id="notconnected" style="display:none;">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Error, not connected
        </div>
          </div>

        </div>
        </div>
      </div>
      <div style="margin-bottom:4px"></div>

      <div class="alert alert-info" role="alert" id="start" style="display:none;">
      <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
      This smart contract is still <u>active</u> and it will be resolved on <span class="expdateinfo" class="b"></span>, if at this time there is no accepted answer the funds of the sponsors will be refunded.
      </div>

      <div class="alert alert-success" role="alert" id="end" style="display:none;">
      <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
      This smart contract was <u>resolved</u> on <span class="expdateinfo" class="b"></span>. At the given date the question had <span id="answer_acc" class="b"></span>, hence the goal <span id="resultcontr" class="b"></span> reached. Given that, <span id="resultsuccess"></span>
      </div>

      <div class="row" id="initiald">
      <div class="col-md-8 col-md-offset-2 center" id="content_init">
      <span id="load_q"><img src="loadingnewc.gif" alt="loading"/> Loading, please wait...</span>
      <h4 class="center" style="display:none;" id="content_title">Available questions with bounty:</h4><br>
      <div id="questions_list">
      </div>
      </div>
      </div>

      <div class="row" id="content" style="display:none;">
        <div class="col-md-3">
<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">Site</h3>
  </div>
        <div class="panel panel-default">
        <div class="panel-body">
          <img src="" alt="site" id="imgfav"/>
          <span id="siteinfo">...</span>
          </div>
        </div>
</div>

<div class="panel panel-primary" id="first_panel">
  <div class="panel-heading">
    <h3 class="panel-title">Total bounty</h3>
  </div>
        <div class="panel panel-default">
        <div class="panel-body">
          <span id="tot_b">...</span>
          </div>
        </div>
</div>
<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">Expiry date</h3>
  </div>
        <div class="panel panel-default">
        <div class="panel-body">
          <span id="expdateinfo">...</span>
          </div>
        </div>
</div>
      </div>
  <div class="col-md-9" id="question_show" style="display:none;">
  <div style="-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; border: 1px solid #ADADAD;padding:10px;margin-bottom: 15px;">
  <h5 id="q_title"></h5>
  <hr>
  <div id="wmd-button-bar-customsuffix" style="display: none;"></div>
  <span id="wmd-preview-customsuffix"></span>
  <textarea id="wmd-input-customsuffix" style="display:none;" type="hidden"></textarea>
  <span id="place_h" style="display:none;"></span>
  <div class="right" style="margin-top:-5px;">
  <span id="q_owner"></span>
  </div>
  </div>
  <span id="lasthr"></span>
<br><p></p>
<h4>Sponsors list:</h4>
<table class="table table-bordered" id="tab">
    <thead>
        <tr id="columntitle">
            <th>#</th>
            <th>Address</th>
            <th>Amount</th>
        </tr>
    </thead>
    <tbody>

    </tbody>
</table>
  </div>
    </div> <!-- /container -->
<br>
<hr>
<footer class="footer">
      <div class="container">
        <p class="text-muted center">Designed by &nbsp;<a href="http://www.oraclize.it" target="_blank"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEU2RUUyQjNDMzRFMTFFNTk3MDRCNTJBQTk2N0M4NUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEU2RUUyQjRDMzRFMTFFNTk3MDRCNTJBQTk2N0M4NUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRTZFRTJCMUMzNEUxMUU1OTcwNEI1MkFBOTY3Qzg1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRTZFRTJCMkMzNEUxMUU1OTcwNEI1MkFBOTY3Qzg1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuHu1SIAAAKmSURBVHjadFNLTxNRGD3z7LTFNvQBFTGgEpGHEg3qbzBuSExM2GjizqU/wV/gloSdJq5MXBlZGDcuDBEf0IgmRKDQQAGpfVDotJ0Zz3dpjZJ4mzN3Ovd+5zvf+e7V8P/RQwwSo8QVTdPGDF0fbnlemP+XiJfEHLEqm7V2kCmbiZvEpK7r47HYqaFUKpHI9KTRS5zpyyC/tY3Xc28xMTGG9dwmCoXdA+5/RzwRginbth8PDpy9nOlNa6czvUinkojHY4hEHBi6gYA/0zSxVdhBdyKOO1O3UasdYmu70JX9+v3Wh4UvI6ZhGLPTd6dSI5cukpMhfgDP9+ETzWYLTbRwLF1DsVhCJBzm9yZYKs6fG0AymcCnz9mYyQ9BItGNVqul8N9BEyrVKlVGSKIjCAImC5DL5eG6blFn8FG5UlEZTg56Bcsy1bsorFSqiEaFqLOuIbeRl9dNnY96tXIA/QSRkEigmCpDShZfpDQ6oBK7bgNr6xuynBWimgRo+r9EtmVhMbuMZ89fKK8830O97rK0sDKf3qL4q4TdvZ+yfV50l0ssTbIoK9rKmvTrxvWrGB8dRihkw200xAuEHYf+QBFJWbTG7RDtlcsV6IauFsVwz/M4e2q2bEsRt9ipBpU5JFLdJdnKijqLy8SaEOWFeWb2KRrMKgQ8vfCki5y7olE8uD+tygsCX6mTrknytn9vpBdCtGIaJiavTSBk2zBMQx0+6ZbMEhgJO9jfLypljhNSa6vrOdQOD+XTq87VWJJyhi4MoiedUir+DDkrwbGxYrZ0TsiPjupYXJKKsE0sdO5anPjR39+X7OP1kO4pReaxIkGYKgo7u3g//1FdH0lcYmk8lDOMffj3pb1HPCK6CKsNUSvHwyekM2wtcm1zs8Q3YpFoCMFvAQYAe9MxYsjZmN8AAAAASUVORK5CYII=
" alt="Oraclize"> Oraclize</a></p>
      </div>
    </footer>
<!-- Modal -->
<div class="modal fade" id="addnqc" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Add a new question</h4>
      </div>
      <div class="modal-body center">
        Please paste here the URL of the question you want to send a bounty to
        <div class="center" style="margin-top:10px;margin-bottom:7px;">
  <form class="form-inline">
  <div class="form-group">
    <label for="stackexchurl">Stackexchange URL</label>
    <input type="text" class="form-control" id="stackexchurl" placeholder="http://example.stackexchange.com/questions/1/example-of-question" style="width: 400px;">
  </div>
  <span id="result_new_q" class="bg"></span>
  <span id="loading_dep" style="display:none;"><br><img src="loadingnewc.gif" alt="loading"/> Loading, please wait...</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="newquestionsubmit">ADD</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">

var node_list = {
  'Mainnet' : 'http://178.62.29.206:8081/',
  'Morden' : 'http://178.62.29.206:8082/',
  'Testnet161' : 'http://178.62.29.206:8083/',  
};

var abi = [{"constant":false,"inputs":[{"name":"myid","type":"bytes32"},{"name":"result","type":"string"}],"name":"__callback","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_id","type":"uint256"},{"name":"_site","type":"string"}],"name":"depositQuestion","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"questions","outputs":[{"name":"contract_address","type":"address"},{"name":"owner_accepted_question","type":"address"},{"name":"user_id_accepted_answer","type":"uint256"},{"name":"id_q","type":"uint256"},{"name":"site","type":"string"},{"name":"accepted_answer","type":"uint256"},{"name":"delay","type":"uint256"},{"name":"expiry","type":"uint256"},{"name":"fee","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_id_q","type":"uint256"},{"name":"_site","type":"string"}],"name":"getAddressQuestion","outputs":[{"name":"q_addr","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"_id_n","type":"uint256"}],"name":"getSponsors","outputs":[{"name":"s_list","type":"address[]"}],"type":"function"},{"constant":true,"inputs":[{"name":"_id_n","type":"uint256"},{"name":"_sponsor_addr","type":"address"}],"name":"getSponsorsBalance","outputs":[{"name":"s_balance","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"i","type":"uint256"}],"name":"uint2str","outputs":[{"name":"","type":"string"}],"type":"function"},{"inputs":[],"type":"constructor"}];

var web3sett = false;
var gethip = '';
var contractid = '';
var hash = '';
var list = '';
var web3;
var ended = false;
var ownerusername = '';
var refundsponsors = '';
var gasamountdeploy = 3000000;
var gasDepositQuestionMethod = 500000;
var unlocked_accounts = ''; // []
var mistob = false;
var contractdefault = '0x9c831538016957f1a7f0807da2970ba3b22e019f';

if(typeof mist !== 'undefined'){
  
  mistob = true;

  /* --- REMOVE ATTR NON FUNZIONA (FIX solo per debug!) --- */
  removeattrdismist();
  /* --- ------------------------ --- */

  $('#gethip').val('MIST BROWSER');
  web3 = new Web3(web3.currentProvider);
  var available_accounts = web3.eth.accounts;
  //document.write(JSON.stringify(available_accounts));
  /*
  $.each(available_accounts,function(index,val){
      var gastotneeded = gasamountsetvideo+gasamountdeploy;
      if(web3.eth.getBalance(val).toNumber()>=gastotneeded && val.length==42){
        unlocked_accounts.push(val);
      }
  });
*/
  unlocked_accounts = web3.eth.accounts[0];
  geth_req();
}
else {
  geth_req();
}

$( document ).ready(function() {
Object.keys(node_list).forEach(function(i) {
  list += '#'+i+',';

  $('#btgr').append('<button type="button" class="btn btn-default btn-sm" id="'+i+'">'+i+'</button>');
});

if(window.location.hash!=''){
  hash = window.location.hash.substr(1);
  $('#bback').html('<a href="http://dapps.oraclize.it/stackexchange/" style="border-bottom: 1px dotted #2196F3; text-decoration: none;" ><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span> Questions list</a>');
  $('#contractid').val(hash);
  $('#contriddep').val(hash);
  $('#submitcontractid').click();
  $('#sponsorq').show();
}
else {
      $('#content_title').show();
      $('#load_q').hide();
      $('#content_title').addClass('animated fadeIn');
      $('#contractid').val(contractdefault);
      $('#submitcontractid').click();
      //$('#buttoncollapseid').click();
}

setTimeout(function(){
$(''+list.slice(0, -1)+'').on('click', function() {
  $('#gethip').val(node_list[$(this).text()]);
});
},500);

});

$('#submitgethip').on('click', function() {
  geth_req();
});

$('#newquestionsubmit').on('click', function() {
  $('#stackexchurl').attr('disabled','');
  $('#newquestionsubmit').attr('disabled','');
  if(web3sett==true || mistob==true){
    var url_of_q = $('input[id=stackexchurl]').val().trim();
    var site_q_new = url_of_q.match("://(.*).stackexchange")[1];
    var id_q_new = url_of_q.match("stackexchange.com/questions/(.*)/")[1];
    $('#result_new_q').html('<br>Site: <b>'+site_q_new+'</b>.stackexchange.com<br>Question ID: <b>'+id_q_new+'</b>');
    if(url_of_q=='' || site_q_new.indexOf('/')!==-1 || id_q_new.indexOf('/')!==-1){
      alert('Please enter a valid URL');
    } else {
    var tx_call_m = web3.eth.contract(abi).at(contractdefault).depositQuestion(id_q_new,site_q_new,{from: unlocked_accounts, value: 100000000000000000, gas: gasDepositQuestionMethod});
    $('#loading_dep').show();
    $('#loading_dep').addClass('animated fadeIn');
    setTimeout(function(){
      var contr_add = web3.eth.contract(abi).at(contractdefault).getAddressQuestion(id_q_new,site_q_new);
      console.log(contr_add);
      if(contr_add!='0x0000000000000000000000000000000000000000'){
        $('#result_new_q').append('<br>Question deposited<br><a href="#'+contr_add+'" onclick="clickhash();">'+contr_add+'</a>');
        $('#loading_dep').hide();
      } else {
          setTimeout(function(){
              var contr_add = web3.eth.contract(abi).at(contractdefault).getAddressQuestion(id_q_new,site_q_new);
              if(contr_add!='0x0000000000000000000000000000000000000000'){
                $('#result_new_q').append('<br>Question deposited:<br><a href="#'+contr_add+'" onclick="clickhash();">'+contr_add+'</a>');
                $('#loading_dep').hide();
                i=100000;
              }

          },60000);
      }
    $('#stackexchurl').removeAttr('disabled');
    $('#newquestionsubmit').removeAttr('disabled');
    },9000);
    }
  } else {
    alert('Please connect to a local geth node before.');
  }
});

//var oraclize_addr = '0x1d11e5eae3112dbd44f99266872ff1d07c77dce8';
// TEST
var oraclize_addr = '0x20e12a1f859b3feae5fb2a0a32c18f5a65555bbf';
var clean_questions = [];
$('#submitcontractid').on('click', function(e) {
  $('#loadingif').css('display','inline-block');
  e.preventDefault();
if(web3sett==true){
  contractid = $('#contractid').val().trim();
  if(hash!=contractid){
    //window.location.hash = contractid;
  }

  if(hash==''){
    $('#addnq').removeAttr('style');
  }

  var oraclize_contract_check = web3.eth.getStorageAt(contractid, 0).replace('000000000000000000000000','');
  var contr_bal = web3.toDecimal(web3.eth.getStorageAt(contractid, 6));
  var number_of_questions = web3.eth.getStorageAt(contractid, 5);
  //var vowner = web3.eth.getStorageAt(contractid, 4).replace('0x000000000000000000000000','');
  //var vviews1 = web3.toDecimal(web3.eth.getStorageAt(contractid, 2));

    //var OAR_addr = "0x1d11e5eae3112dbd44f99266872ff1d07c77dce8";
    // TEST
    var OAR_addr = "0x20e12a1f859b3feae5fb2a0a32c18f5a65555bbf";
    var OAR = web3.eth.contract([ { "constant": false, "inputs": [], "name": "getAddress", "outputs": [ { "name": "oaddr", "type": "address" } ], "type": "function" }]).at(OAR_addr).getAddress.call();
    var oraclize = web3.eth.contract([{ "constant": true, "inputs": [], "name": "baseprice", "outputs": [ { "name": "", "type": "uint256" } ], "type": "function" }]).at(OAR);
    var base_price_oraclize = oraclize.baseprice().toNumber();


  if(web3.toAscii(web3.eth.getStorageAt(contractid, 3))=="\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000"){
  for(var i=1;i<=number_of_questions;i++){
    // N - 1
    // 1 = contract address generated
    // 2 = owner accepted question (address)
    // 3 = User id accepted question
    // 4 = ID of the question (site.stackexchange.com/ID/)
    // 5 = site of the question
    // 6 = ID of the accepted answer
    // 7 = delay between oraclize queries (in seconds)
    // 8 = expiry date
    // 9 = current fee

    clean_questions[i] = [];
    clean_questions[i] = JSON.parse(JSON.stringify(web3.eth.contract(abi).at(contractid).questions(i)));

    var nowunix = new Date().getTime()/1000;
    if(clean_questions[i][1]=='0x0000000000000000000000000000000000000000' && nowunix<parseInt(clean_questions[i][7])){
      var date = new Date(clean_questions[i][7]*1000);
      var hours = date.getHours();
      var minutes = "0" + date.getMinutes();

      var month = "0"+(date.getMonth()+1);
      var day = date.getDate();
      var year = "0"+date.getYear();

      var formattedTime = hours + ':' + minutes.substr(-2) + ' ' + day +'/'+month+'/'+year.substr(-2);
      var exp_text = 'Expiry date:'
      var exp = formattedTime;
    }
    else if(clean_questions[i][1]!='0x0000000000000000000000000000000000000000'){
      var exp_text = 'Status:'
      var exp = 'Completed';
    }
    else if(clean_questions[i][1]=='0x0000000000000000000000000000000000000000' && nowunix<parseInt(clean_questions[i][7])){
      var exp_text = 'Status:'
      var exp = 'Expired';
    }

    var title_question = '';
    var tot_bounty = 0;

    var s_list = web3.eth.contract(abi).at(contractid).getSponsors(i);
    for(var y=1;y<=s_list.length;y++){
      tot_bounty += web3.toDecimal(web3.eth.contract(abi).at(contractid).getSponsorsBalance(i,s_list[y-1]));
    }

    var question_ok = true;

     $.ajax({
            url: "https://api.stackexchange.com/2.2/questions/"+clean_questions[i][3]+"?site="+clean_questions[i][4],
            type: "GET",
            crossDomain: true,
            dataType: "json",
            success: function (resp) {
              if(resp['error_id']==400){
                question_ok = false;
                return;
              }
              title_question = resp['items'][0]['title'];
              console.log(resp['items'][0]['title']);
            }, 
            async: false,
            error: function (xhr, status) {
                question_ok = false;
                return;
            }
        });
    


    if(question_ok){
    var usdpr = parseFloat((tot_bounty/(base_price_oraclize*1000))).toFixed(2);
    var ethpr = parseFloat((tot_bounty/1000000000000000000)).toFixed(2);
    ethpr= (ethpr<=0) ? '< 0.01':'~ '+ethpr;
    usdpr= (usdpr<=0) ? '< 0.01':'~ '+usdpr;

    var question_html = '<div class="panel panel-default" id="question_list_n_'+i+'" style="display:none;"> <div class="panel-body"> <div class="row"> <div class="col-md-1"><div class="iwrap"><div class="iconsite"><img src="http://cdn.sstatic.net/'+clean_questions[i][4]+'/img/favicon.ico" alt="stackexchange icon"/><span class="siteb" title="'+clean_questions[i][4]+'.stackexchange.com">'+clean_questions[i][4]+'</span></div></div> </div> <div class="col-md-9 center"> <span class="extra">'+title_question+'</span> </div> <div class="col-md-2"> <a href="#'+clean_questions[i][0].trim()+'" onclick="clickhash();"> <span class="seemore">SEE MORE</span> <span class="glyphicon glyphicon-play playedit"></span> </a> </div> </div> <div class="row" style="margin-top:5px;"> <div class="col-md-8 col-md-offset-2"> <div class="col-md-6"> <span class="rounded">Total Bounty:</span> <span title="'+ethpr+' ETHER">'+usdpr+' $</span> </div> <div class="col-md-6"> <span class="rounded">'+exp_text+'</span> <span>'+exp+'</span> </div> </div> </div> </div> </div>';
    $('#questions_list').append(question_html);
    }
  
  }
}
else {
console.log(oraclize_contract_check);
  if(oraclize_contract_check!=oraclize_addr && contr_bal>0){
    $('#buttoncollapseid').click();
    alert('Contract ID not found or is not a stackexchange contract');
    return;
  }

  var id_n = web3.toDecimal(web3.eth.getStorageAt(contractid, 2));
  var site = web3.toAscii(web3.eth.getStorageAt(contractid, 3));
  var id_q = web3.toDecimal(web3.eth.getStorageAt(contractid, 1));
  var main_addr = web3.eth.getStorageAt(contractid, 0).replace('0x000000000000000000000000','');

    clean_questions[id_n] = [];
    clean_questions[id_n] = JSON.parse(JSON.stringify(web3.eth.contract(abi).at(main_addr).questions(id_n)));
    var nowunix = new Date().getTime()/1000;
      var date = new Date(clean_questions[id_n][7]*1000);
      var hours = date.getHours();
      var minutes = "0" + date.getMinutes();

      var month = "0"+(date.getMonth()+1);
      var day = date.getDate();
      var year = "0"+date.getYear();

      var formattedTime = hours + ':' + minutes.substr(-2) + ' ' + day +'/'+month+'/'+year.substr(-2);
      var exp = formattedTime;
      $('.expdateinfo').html(exp);
      $('#expdateinfo').html('<span style="font-size:1.4em;">'+exp+'</span>');

      var question_owner;
      var question_owner_link;
      var question_owner_profile_image;
      var question_link;
      var question_title;
      var question_body;
     $.ajax({
            url: 'https://api.stackexchange.com/2.1/questions/'+clean_questions[id_n][3]+'?site='+clean_questions[id_n][4]+'&filter=withbody',
            type: "GET",
            crossDomain: true,
            dataType: "json",
            success: function (resp) {
              if(resp['error_id']==400){
                return;
              }
              question_owner = resp['items'][0]['owner']['display_name'];
              question_owner_profile_image = resp['items'][0]['owner']['profile_image'];
              question_owner_link = resp['items'][0]['owner']['link'];
              question_link = resp['items'][0]['link'];
              question_title = resp['items'][0]['title'];
              question_body = resp['items'][0]['body'].replace("\n",'');

            }, 
            async: false,
            error: function (xhr, status) {
                return;
            }
        });

$('#q_title').html(question_title);
$('#q_owner').html('<span class="text-muted">Asked by</span>  <a href="'+question_owner_link+'" target="_blank"><img src="'+question_owner_profile_image+'" alt="profile image" width="20px" height="20px"/> '+question_owner+'</a>');
$('#wmd-input-customsuffix').html(question_body);
$('#place_h').html(question_body);
var uniqueEditorSuffix = '-customsuffix';
var converter1 = Markdown.getSanitizingConverter();
var editor1 = new Markdown.Editor(converter1, uniqueEditorSuffix);
var mjpd1 = new MJPD();  // create a new MJPD for each editor on the page
mjpd1.Editing.prepareWmdForMathJax(editor1, uniqueEditorSuffix, [["$", "$"]]);
editor1.run();

$('#lasthr').after('<a href="'+question_link+'" target="_blank"><div class="box_all_ans center"><span style="vertical-align: -webkit-baseline-middle;">See all the answers <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span></span> </div></a>')

$('#question_show').show();

$('#siteinfo').html('<b>'+clean_questions[id_n][4]+'</b>.stackexchange.com');
$('#imgfav').attr('src','http://cdn.sstatic.net/'+clean_questions[id_n][4]+'/img/favicon.ico');
    if(clean_questions[id_n][1]=='0x0000000000000000000000000000000000000000' && nowunix<parseInt(clean_questions[id_n][7])){
      $('#start').show();
      $('#start').addClass('animated fadeInUp');
      $('#sponsorq').removeAttr('disabled');
    }
    else if(clean_questions[id_n][1]!='0x0000000000000000000000000000000000000000'){
      $('#sponsorq').attr('title','The status of this smart contract is completed, you cannot sponsor this question anymore');
    var url_api = 'https://api.stackexchange.com/2.2/users/'+clean_questions[id_n][2]+'?site='+clean_questions[id_n][4];

    var user_link;

     $.ajax({
            url: url_api,
            type: "GET",
            crossDomain: true,
            dataType: "json",
            success: function (resp) {
              if(resp['error_id']==400){
                return;
              }
              user_link = '<a href="'+resp['items'][0]['link']+'" target="_blank">@'+resp['items'][0]['display_name']+"</a>";
            }, 
            async: false,
            error: function (xhr, status) {
                return;
            }
        });

      $('#answer_acc').html('one accepeted answer');
      $('#resultcontr').html("was");
      $('#resultsuccess').html("all the sponsors funds was sent to the user with the accepted answer");
      $('#first_panel').after('<div class="panel panel-primary"> <div class="panel-heading"> <h3 class="panel-title">User accepted answer address</h3> </div> <div class="panel panel-default"> <div class="panel-body"> <a href="https://test.ether.camp/account/'+clean_questions[id_n][1]+'" target="_blank" title="'+clean_questions[id_n][1]+'">'+clean_questions[id_n][1].slice(0, -34)+'...</a> ( '+user_link+' )</div> </div> </div>');
      $('#end').show();
      $('#end').addClass('animated fadeInUp');
    }
    else if(clean_questions[id_n][1]=='0x0000000000000000000000000000000000000000' && nowunix<parseInt(clean_questions[id_n][7])){
      $('#answer_acc').html('no accepeted answer');
      $('#resultcontr').html("wasn't");
      $('#resultsuccess').html("the sponsors have received a refund of their balance");
      $('#end').show();
      $('#end').addClass('animated fadeInUp');
    }

    var tot_bounty = 0;

    var s_list = web3.eth.contract(abi).at(main_addr).getSponsors(id_n);
    var b_list = [];
    for(var y=1;y<=s_list.length;y++){
      b_list[y] = web3.toDecimal(web3.eth.contract(abi).at(main_addr).getSponsorsBalance(id_n,s_list[y-1]));
      tot_bounty += web3.toDecimal(web3.eth.contract(abi).at(main_addr).getSponsorsBalance(id_n,s_list[y-1]));
    }

    var usdpr = parseFloat((tot_bounty/(base_price_oraclize*1000))).toFixed(2);
    var ethpr = parseFloat((tot_bounty/1000000000000000000)).toFixed(2);
    ethpr= (ethpr<=0) ? '0.01':'~ '+ethpr;
    usdpr= (usdpr<=0) ? '< <span style="font-size:1.7em;">0.01</span>':'~ <span style="font-size:1.7em;">'+usdpr+'</span>';
    $('#tot_b').html('<span title="'+ethpr+' ETHER">'+usdpr+' $</span>');
    for(var k=1;k<=s_list.length;k++){
      var usdpr = parseFloat((b_list[k]/(base_price_oraclize*1000))).toFixed(2);
      var ethpr = parseFloat((b_list[k]/1000000000000000000)).toFixed(2);
      ethpr= (ethpr<=0) ? '0.01':'~ '+ethpr;
      usdpr= (usdpr<=0) ? '< 0.01':'~ '+usdpr;
      $('#tab > tbody').append('<tr> <th scope="row">'+k+'</th> <td>'+s_list[k-1].replace('0x','')+'</td> <td title="'+ethpr+' ETHER">'+usdpr+' $</td> </tr>');      
    }
    

  //var namereg_addr = "0x33990122638b9132ca29c723bdf037f1a891a70c";
  // TEST
  var namereg_addr = "0xb22238d201a1d5813866933eb69b30692e14f9e0";
  try {
      var GlobalRegistrar = web3.eth.contract([{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"name","outputs":[{"name":"o_name","type":"bytes32"}],"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"bytes32"}],"name":"owner","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"bytes32"}],"name":"content","outputs":[{"name":"","type":"bytes32"}],"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"bytes32"}],"name":"addr","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"}],"name":"reserve","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"bytes32"}],"name":"subRegistrar","outputs":[{"name":"o_subRegistrar","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"},{"name":"_newOwner","type":"address"}],"name":"transfer","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"},{"name":"_registrar","type":"address"}],"name":"setSubRegistrar","outputs":[],"type":"function"},{"constant":false,"inputs":[],"name":"Registrar","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"},{"name":"_a","type":"address"},{"name":"_primary","type":"bool"}],"name":"setAddress","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"},{"name":"_content","type":"bytes32"}],"name":"setContent","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"_name","type":"bytes32"}],"name":"disown","outputs":[],"type":"function"},{"constant":true,"inputs":[{"name":"_name","type":"bytes32"}],"name":"register","outputs":[{"name":"","type":"address"}],"type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"name","type":"bytes32"}],"name":"Changed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"name","type":"bytes32"},{"indexed":true,"name":"addr","type":"address"}],"name":"PrimaryChanged","type":"event"}]).at(namereg_addr);
      ownerusername = web3.toAscii(GlobalRegistrar.name(owner));
      //ownerusername = web3.eth.contract([{ "constant": true, "inputs": [ { "name": "addr", "type": "address" } ], "name": "nameOf", "outputs": [ { "name": "name", "type": "string" } ], "type": "function" }]).at(namereg_addr).nameOf(owner);
  } catch (e){ ownerusername = "\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u0000";  };
  $('#load_q').hide(),
  $('#content').show();
  $('#content > .col-md-3 > .panel').each(function(){
  $(this).addClass('animated fadeIn');
  });
}
}
else {
  alert('Please, connect to geth node before');
}

});


setTimeout(function(){
var m = 1;
$('#questions_list> .panel').each(function(indx, val) {
    
    $(this).show();
    $(this).addClass('animated fadeInUp');

  m += 1;
});

}, 1000);

function geth_req(){
  gethip = $('#gethip').val();
  $('#connected, #notconnected').hide();
  if(gethip!='MIST BROWSER') {
    web3 = new Web3(new Web3.providers.HttpProvider(gethip));
  }
  if(web3.isConnected()!=false){
    web3sett = true;
    $('#connected').show();
  var available_accounts = web3.eth.accounts;

  if(mistob==false) {
  unlocked_accounts = ''; // []

  $.each(available_accounts,function(index,val){
  web3.eth.sendTransaction({from:val, to:val, value: 0, gas: 0, gasPrice: 0 },
  function(err, res){
  if(err=='Error: Gas price too low for acceptance'){
      // unlocked
      /*
      var gastotneeded = gasamountsetvideo+gasamountdeploy;
      if(web3.eth.getBalance(val).toNumber()>=gastotneeded){
        unlocked_accounts.push(val);
      }
      */
      unlocked_accounts = web3.eth.accounts[0];
    }
    });


  });
  }
 

 setTimeout(function(){
        
  if(unlocked_accounts.length>0){
    $('#addnq').removeAttr('disabled');
    $('#addnq').removeAttr('title');
  }
  else {
    if(mistob==false){
      $('#addnq').attr('disabled','');
      $('#addnq').attr('title','Please connect to your local unlocked node before');
    }
  }
}, 200);
  

  }
  else {
    reset();
    web3sett = false;
    $('#notconnected').show(); 
  }


}

function removeattrdismist(){
    $('#addnq').removeAttr('disabled');
    $('#addnq').removeAttr('title');
}

function onmouseoverdepldisabled(x){
  if(x==1){
      $('#arrowifdisabled').html('<img src="arrow.png" alt="arrow" style="margin-top:-50px;">');
      $('#arrowifdisabled').addClass('animated fadeIn');
  }
  else {
      //$('#arrowifdisabled').addClass('animated fadeOut');
      $('#arrowifdisabled').html('');
  }
}

function numberWithCommas(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

$(function() {
    function reposition() {
        var modal = $(this),
            dialog = modal.find('.modal-dialog');
        modal.css('display', 'block');
        
        // Dividing by two centers the modal exactly, but dividing by three 
        // or four works better for larger screens.
        dialog.css("margin-top", Math.max(0, ($(window).height() - dialog.height()) / 2));
    }
    // Reposition when a modal is shown
    $('.modal').on('show.bs.modal', reposition);
    // Reposition when the window is resized
    $(window).on('resize', function() {
        $('.modal:visible').each(reposition);
    });
});


function clickhash(){
window.setTimeout(function(){ location.reload(); },80);
}

jQuery(document).ready(function($) {
$('#place_h').markdownEditor({
    preview: true,
    onPreview: function (content, callback) {
        callback( $('#wmd-preview-customsuffix').html(marked(content)) );
    }
});
});

function reset(){
  $('#addnq').attr('disabled','');
  $('#addnq').attr('title','Please connect to your local unlocked node before');
  $('#vthres').html('');
  $('#vexp').html('');
  $('#vowner').html('');
  $('#contriddep').val('');
  $('#youtube_embed').removeClass('animated fadeIn');
  $('#initiald').removeClass('animated FadeOut');
  $('#loadingif').css('display','none');
  $('#tab > tbody').html('');
  $('#vthresinfo, #vthresinfo1').html('');
  $('#expdateinfo, #expdateinfo1').html('');
  $('#content').hide();
  $('#initiald').show();
}
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59380873-1', 'auto');
  ga('send', 'pageview');

</script>
=======
    </script>
        <!-- <script>
            MathJax.Hub.Config({
                    "HTML-CSS":
                    {
                        preferredFont: "TeX",
                        availableFonts: ["STIX","TeX"],
                        linebreaks: { automatic:true },
                        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
                    },
                    tex2jax:
                    {
                        inlineMath: [ ["$", "$"], ["\\\\(","\\\\)"] ],
                        displayMath: [ ["$$","$$"], ["\\[", "\\]"] ],
                        processEscapes: true,
                        ignoreClass: "tex2jax_ignore|dno"
                    },
                    TeX:
                    {
                        noUndefined:
                        {
                            attributes:
                                {
                                    mathcolor: "red",
                                    mathbackground: "#FFEEEE",
                                    mathsize: "90%"
                                }
                        },
                        Macros: { href: "{}" }
                    },
                    messageStyle: "none"
            });
        </script> -->

</head>
<body>
    <div style="position: absolute; left: 0; top: 0; padding: 5px 0 0 5px; font-size: 1.05em;" id="bback">
      <a href="http://dapps.oraclize.it/" style="border-bottom: 1px dotted #2196F3; text-decoration: none;">
          <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
          √êapps list
      </a>
    </div>

    <span class="active_javascript center" style="display:none;">
       Javascript is required, please enable it
   </span>

   <div class="container">
<!-- Modal -->
        <div class="modal fade" id="sponsorQuestionDiv"
            tABIndex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Sponsor this question</h4>
              </div>
              <div class="modal-body center">
                  You can become a sponsor for this question by sending a transaction with any wallet to the following Ethereum address. The transaction must have a custom gas value of 40000.
                <div class="center" style = "margin-top:10px;margin-bottom:7px;">
                  <input type="text" value="" id="contractAddrInput" class="form-control" style="width: 400px; display: inline-block; right: 0; left: 0; text-align: center;border-radius: 5px;-moz-border-radius:5px;border: 1px dashed #B5B5B5;background-color: #F5F5F5;" readonly onclick="this.select();"/>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>

        <div class="page-header">

            <h3>StackExchange Bounty Contract</h3>

            <div class="fright right">
                <button type="button" class="btn" data-toggle="collapse" data-target="#collapsedit"
                    id="buttoncollapseid">
                    Advanced Settings
                </button>
                <div style="margin-top:7px;"></div>
                <span id="arrowifdisabled"></span>

                <button type="button" class="btn btn-info" style="display:none;"
                    data-target="#addNewQuestionDiv" id="addNewQuestionBtn"
                    title = "Please connect to your local unlocked node before"
                    data-toggle="modal" disabled >
                    Add a new question
                </button>

                <button type="button" class="btn btn-success" style="display:none;"
                    data-target="#sponsorQuestionDiv" id="sponsorQuestionBtn"
                    data-toggle="modal" disabled >
                    Sponsor this question
                </button>
            </div>

            <p class="lead">
                Bounties for StackExchange Questions<br>
            </p>

            <span class="text-muted">Powered by
                <a href="https://www.ethereum.org/" target="_blank">Ethereum</a> +
                <a href="http://www.oraclize.it" target="_blank">Oraclize</a>
            </span>

        </div>

        <div id="collapsedit" class="collapse">
             <div class="row">
                <div class="col-md-6">
                    <div class="form-inline">
                        <div class="form-group">
                            <label for="contractAddr" class="control-label">Please enter the contract address:</label>
                            <input type="text" class="form-control" id="contractAddr" style="width:400px;margin: 0 5px 0 5px;">
                            <span class="btn btn-default" id="submitContractAddr">SUBMIT</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="well" style="overflow: auto;">

                        <div class="center" style="margin-bottom:7px;margin-top:-10px;">
                            <div class="btn-group" role="group" aria-label="..." id="btgr" style="display:none;"></div>
                        </div>

                        <div class="form-inline">
                            <div class="form-group">
                                <label for="nodeIP" class="control-label">Connect to node:</label>
                                <input type="text" class="form-control" id = "nodeIP" style="width:200px;margin: 0 5px 0 5px;" value = "http://178.62.29.206:8082/">
                      <!--<input type="text" class="form-control" id="nodeIP" style="width:200px;margin: 0 5px 0 5px;" value="http://localhost:8545">-->
                                <span class="btn btn-default" id="submitNodeIP">CONNECT</span>
                            </div>
                        </div>

                        <div class="fleft" id="connected" style="display:none;">
                            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> Connected
                        </div>

                        <div class="fleft" id="notconnected" style="display:none;">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Error, not connected
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div style="margin-bottom:4px"></div>

        <div class="alert alert-info" role="alert" id="start" style="display:none;">
        </div>

        <div class="alert alert-success" role="alert" id="end" style="display:none;">
              <span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
              This smart contract was <u>resolved</u> on the <span id="expdateinfo" class="b"></span>. At the given date the question had <span id="answer_acc" class="b"></span>, hence the goal <span id="resultcontr" class="b"></span> reached. Given that, <span id="resultsuccess"></span>
        </div>

        <div class="row" id="initiald">
            <div class="col-md-8 col-md-offset-2 center" id="content_init">
                <span id="loadingQuestion"><img src="loadingnewc.gif" alt="loading"/> Loading, please wait...</span>
                <h4 class="center" style="display:none;" id="content_title">List of All Questions</h4><br>
                <div id="questionList"></div>
            </div>
        </div>

        <div class="row" id="content" style="display:none;">

            <div class="col-md-3">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Site</h3>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <img src="" alt="site" id="imgfav"/>
                            <span id="siteinfo">...</span>
                        </div>
                    </div>
                </div>

                <div class="panel panel-primary" id="first_panel">
                    <div class="panel-heading">
                        <h3 class="panel-title">Total Bounty</h3>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <span id="tot_b">...</span>
                        </div>
                    </div>
                </div>

                <div id = 'panel-expiry-date' class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Expiry Date</h3>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-body">
                            <span id="expiry-date"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-9" id="question_show" style="display:none;">
                <div style="-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px; border: 1px solid #ADADAD;padding:10px;margin-bottom: 15px;">
                    <h5 id="q_title"></h5>
                    <hr>
                    <div id="wmd-button-bar-customsuffix" style="display: none;"></div>
                    <span id="wmd-preview-customsuffix"></span>
                    <textarea id="wmd-input-customsuffix" style="display: none" type="hidden"></textarea>
                    <span id="place_h" style="display:none;"></span>
                    <div class="right" style="margin-top:-5px;">
                        <span id="q_owner"></span>
                    </div>
                </div>
                <span id="lasthr"></span>
                <br><p></p>
                <h4>Sponsors list:</h4>
                <table class="table table-bordered" id="tab">
                    <thead>
                        <tr id="columntitle">
                            <th>#</th>
                            <th>Address</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div> <!-- /container -->
    <br>
    <hr>

    <footer class="footer">
          <div class="container">
            <p class="text-muted center">Designed by &nbsp;
                <a href="http://www.oraclize.it" target="_blank">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAADphp8SAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEU2RUUyQjNDMzRFMTFFNTk3MDRCNTJBQTk2N0M4NUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEU2RUUyQjRDMzRFMTFFNTk3MDRCNTJBQTk2N0M4NUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRTZFRTJCMUMzNEUxMUU1OTcwNEI1MkFBOTY3Qzg1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRTZFRTJCMkMzNEUxMUU1OTcwNEI1MkFBOTY3Qzg1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuHu1SIAAAKmSURBVHjadFNLTxNRGD3z7LTFNvQBFTGgEpGHEg3qbzBuSExM2GjizqU/wV/gloSdJq5MXBlZGDcuDBEf0IgmRKDQQAGpfVDotJ0Zz3dpjZJ4mzN3Ovd+5zvf+e7V8P/RQwwSo8QVTdPGDF0fbnlemP+XiJfEHLEqm7V2kCmbiZvEpK7r47HYqaFUKpHI9KTRS5zpyyC/tY3Xc28xMTGG9dwmCoXdA+5/RzwRginbth8PDpy9nOlNa6czvUinkojHY4hEHBi6gYA/0zSxVdhBdyKOO1O3UasdYmu70JX9+v3Wh4UvI6ZhGLPTd6dSI5cukpMhfgDP9+ETzWYLTbRwLF1DsVhCJBzm9yZYKs6fG0AymcCnz9mYyQ9BItGNVqul8N9BEyrVKlVGSKIjCAImC5DL5eG6blFn8FG5UlEZTg56Bcsy1bsorFSqiEaFqLOuIbeRl9dNnY96tXIA/QSRkEigmCpDShZfpDQ6oBK7bgNr6xuynBWimgRo+r9EtmVhMbuMZ89fKK8830O97rK0sDKf3qL4q4TdvZ+yfV50l0ssTbIoK9rKmvTrxvWrGB8dRihkw200xAuEHYf+QBFJWbTG7RDtlcsV6IauFsVwz/M4e2q2bEsRt9ipBpU5JFLdJdnKijqLy8SaEOWFeWb2KRrMKgQ8vfCki5y7olE8uD+tygsCX6mTrknytn9vpBdCtGIaJiavTSBk2zBMQx0+6ZbMEhgJO9jfLypljhNSa6vrOdQOD+XTq87VWJJyhi4MoiedUir+DDkrwbGxYrZ0TsiPjupYXJKKsE0sdO5anPjR39+X7OP1kO4pReaxIkGYKgo7u3g//1FdH0lcYmk8lDOMffj3pb1HPCK6CKsNUSvHwyekM2wtcm1zs8Q3YpFoCMFvAQYAe9MxYsjZmN8AAAAASUVORK5CYII=
                    " alt="Oraclize"> Oraclize</a></p>
          </div>
    </footer>
<!-- Modal -->
    <div class="modal fade" id="addNewQuestionDiv" tABIndex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Add a new question</h4>
                </div>
                <div class="modal-body center">
                  Please paste here the URL of the question you want to send a bounty to
                  <div class="center" style="margin-top:10px;margin-bottom:7px;">
                      <form class="form-inline">
                          <div class="form-group">
                              <label for="StackExchangeURL">StackExchange URL</label>
                              <input type="text" class="form-control" id="StackExchangeURL" placeholder="http://example.stackexchange.com/questions/1/example-of-question" style="width: 400px;">
                          </div>
                           <div class="form-group">
                               <label for="BountyAmount">Bounty Amount</label>
                               <input type="text" class="form-control" id="BountyAmount"
                                    value = "0.1" style="width: 400px;">
                           </div>
                          <span id="newQuestionResult" class="bg"></span>
                          <span id="loading_dep" style="display:none;"><br><img src="loadingnewc.gif" alt="loading"/> Loading, please wait...</span>
                </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="newQuestionClose">Close</button>
                <button type="button" class="btn btn-primary" id="newQuestionSubmit">ADD</button>
              </div>
            </div>
          </div>
        </div>
    </div>
    <script src = "script.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59380873-1', 'auto');
      ga('send', 'pageview');
    </script>
>>>>>>> working_branch

</body>
</html>
